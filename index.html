<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>皮蛋の孤独</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="命裏有時終須有，命裏無時莫強求">
<meta property="og:type" content="website">
<meta property="og:title" content="皮蛋の孤独">
<meta property="og:url" content="http://wenhaozhang.com/index.html">
<meta property="og:site_name" content="皮蛋の孤独">
<meta property="og:description" content="命裏有時終須有，命裏無時莫強求">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="皮蛋の孤独" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://wenhaozhang.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">皮蛋の孤独</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">裏有時終須有，命裏無時莫強求</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-springboot" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/26/springboot/" class="article-date">
  <time datetime="2020-07-26T03:40:26.000Z" itemprop="datePublished">2020-07-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/26/springboot/">springboot</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>#SpringBoot 实践</p>
<p>从根本上讲，springboot就是一个spring工程，只是它用到了springboot的起步依赖和自动配置而已。</p>
<h3 id="SpringBoot-四大核心"><a href="#SpringBoot-四大核心" class="headerlink" title="SpringBoot 四大核心"></a>SpringBoot 四大核心</h3><ul>
<li>自动配置</li>
<li>起步依赖</li>
<li>命令行界面（用的很少）</li>
<li>Actuator</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2020/07/26/springboot/" data-id="ckd3umben0000z7sfcyf4cs2i" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SpringBoot/" rel="tag">Java SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-sang" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/05/sang/" class="article-date">
  <time datetime="2020-07-05T05:27:09.000Z" itemprop="datePublished">2020-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/05/sang/">hexo文章增加图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="测试hexo文章添加图片"><a href="#测试hexo文章添加图片" class="headerlink" title="测试hexo文章添加图片"></a>测试hexo文章添加图片</h3><ul>
<li>安装图片插件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>

<ul>
<li>修改_config.yml </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>增加文章</li>
</ul>
<p>hexo new post test</p>
<p>这时候在source/_post目录下就生成了1个文件test.md 和1个文件夹test，将图片放在test文件夹下，在test.md就可以使用了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![点我](sang1.png)</span><br></pre></td></tr></table></figure>
<p><img src="/.com//sang1.png" alt="点我"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2020/07/05/sang/" data-id="ckc8p67a50000iyibablafts4" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-shark-lady" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/30/shark-lady/" class="article-date">
  <time datetime="2020-01-30T02:58:03.000Z" itemprop="datePublished">2020-01-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/30/shark-lady/">shark_lady</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="Eugenie-Clark-Shark-Lady"><a href="#Eugenie-Clark-Shark-Lady" class="headerlink" title="Eugenie Clark, Shark Lady"></a>Eugenie Clark, Shark Lady</h3><p>Eugenie Clark is a famous scientist, She has spent her life studying fish. Sharks are some of her favorite fish. Eugenie has traveled around the world to learn about different kinds of sharks. Many people call Eugenie Clark the “shark lady.”</p>
<p>When Eugenie was a young girl, she spent hours observing fish at the New York Aquarium. Eugenie learned about different kinds of fish, and she pretended she was in the water with them. She wondered what it would feel like to be one of the fish.</p>
<p>At home, Eugenie set up her own fish tank. She watched her fish carefully and took notes about what they did. She Wrote about fish and read about them. It was her dream to become a scientist someday.</p>
<p>Not many women were scientists when Eugenie was young.But that didn’t stop her. When Eugenie went to college, she took science classes and became a fish expert.</p>
<p>Eugenie decided to dive deep in the sea, so she could study fish where they live.She learned how to dive with a mask and how to use underwater breathing equipment.</p>
<p>The first time Eugenie saw a shark under the water, she was surprised. The huge shark swam right past her. Eugenie thought it was beautiful, and she was sorry when it swam away.</p>
<p>Eugenie traveled to different parts of the world to study fish. She wrote about her work and became a Well-Known scientist. Then she was asked to start a lab in Florida. The lab was a place where Eugenie and other scientists could study fish.</p>
<p>In the lab, Eugenie tested lemon sharks to see how smart they were. Eugenie trained the sharks to do things. The sharks learned to ring a bell to get food.</p>
<p>Eugenie Clark says that she is not afraid of sharks. She is too interested in them to be scared. But she also says it is important to understand how sharks act.</p>
<p>Eugenie used an underwater cage to study great white sharks. These sharks can be dangerous to people, but Eugenie studied them from inside the cage where she was safe. She observed the sharks and took pictures of them.</p>
<p>Eugenie even went for a ride on a whale shark, the biggest fish in the sea. She grabbed the shark as it swam by her. Then she tried to sit on the shark’s back, but she couldn’t stay on.</p>
<p>Eugenie slid down and held on to the shark’s tail for as long as she could. The shark swam faster and faster. But Eugenie did not feel scared.</p>
<p>Finally, Eugenie had to let go. As she watched the huge shark swim away, she felt happy. Eugenie had learned what it felt like to be a shark!</p>
<p>Eugenie Clark has spent her life studying sharks and other fish. she loves to share what she was learned about them. She talks to scientists and students who visit her lab. She writes books, and she writes articles for magazines, too. Eugenie hopes that other people will love learning about the sea.</p>
<ul>
<li>Some Things Eugenie Clark Has Learned About Sharks</li>
<li>Shark are smart animals. The remember what they learn.</li>
<li>Sharks eat many kinds of sea animals. They eat fish, crabs,and even other sharks.</li>
<li>Most sharks are timid and stay away from people.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2020/01/30/shark-lady/" data-id="ckc8hmgkn0000f4ib309hfvuj" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/english/" rel="tag">english</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-job-ask" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/17/job-ask/" class="article-date">
  <time datetime="2019-11-17T03:01:06.000Z" itemprop="datePublished">2019-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/17/job-ask/">职场汇报</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="职场汇报"><a href="#职场汇报" class="headerlink" title="职场汇报"></a>职场汇报</h3><p>将员工的表现反馈给员工是非常重要的，不仅能帮助员工更加明确自己的努力方向，更能激励员工的士气，提高员工的工资效率。</p>
<p>防止出现 “差之毫厘，失之千里”</p>
<p>他们确实不善于汇报工作或害怕与领导沟通，尽管他们的工作做得不错</p>
<p>及时反馈是加强与领导沟通的一条重要途径</p>
<p>督促自己，让自己的工作安排得更有条理</p>
<p>定期向上司汇报工作</p>
<p>通过一定的方式让领导看得到你的努力</p>
<p>领导随便听听，但你不要随便做做</p>
<p>智者千虑必有一失</p>
<p>唱、念、做、打样样精通</p>
<p>一个没有自己声音的人也就失去了他的用处</p>
<p>建设性的意见往往会被接受</p>
<p>领导看中：1、他的上司是否信任他 2、他的下属是否尊重他</p>
<p>不要在领导问起时再汇报</p>
<p>汇报内容：已经完成、正在工作、将要工作的事情</p>
<p>准确表述</p>
<p>克服害怕与领导沟通的心态</p>
<p>领导的批评一般是对事不对人，他只是就事论事，那些负面的评论并非是他对你本人有微词</p>
<p>提高能见度，从汇报工作开始</p>
<p>工作一项项安排下去后，就想断了线的风筝一样杳无音信</p>
<p>汇报工作是让领导了解情况和了解自己的机会</p>
<p>让问题终止于你</p>
<p>积极为成功找方法，不为失败找借口</p>
<p>找借口是人的一种自我保护的本能</p>
<p>工作失误要花更多的时间、精力和财力来修正</p>
<p>做了不等于做好了</p>
<p>第一次就把事情做到位</p>
<p>没有任何一件事小到可以被抛弃</p>
<p>细微之处见精神</p>
<p>过去，只有适者能够生存，今天，只有最快处理事务的人才能生存</p>
<p>限定完成期限</p>
<p>不管你现在从事什么工作，在何种岗位上，面对工作，你都需要让自己跑起来</p>
<p>热爱你的工作，是做好工作的前提条件</p>
<p>始终保持微笑</p>
<p>凡事预则立不预则废</p>
<p>分清最重要的事，重要之事不可受芝麻绿豆小事的牵绊</p>
<p>除了这种方法，就没有其他更好的方法处理了吗</p>
<p>职场不相信眼泪，不相信苦劳，只需要功劳</p>
<p>言简意赅</p>
<p>我马上处理排查，有进展会立马同步</p>
<p>请您放心，我马上处理</p>
<p>立马付诸行动</p>
<p>您给我点时间让我再想一下，下班前我再给您答复</p>
<p>让领导感受到你积极主动的态度</p>
<p>语气、语速、语境</p>
<p>“正因为他粗鲁，所以我我采用委婉的方式对待他，否则不就吵起来了吗？再说，道理一说就明白了，根本用不着大声说啊”</p>
<p>对方充分理解和接受，才能收到说话的预期效果</p>
<p>口头汇报</p>
<p>瞬间机会的把握上</p>
<p>不该说时说，叫急躁</p>
<p>该说时不说，叫隐瞒<br>不看对方的脸色变化便贸然开口，叫冒失</p>
<p>我们在与领导沟通时，也需要选准说话的时机</p>
<p>先扬后抑的转折句间接地提出你的想法</p>
<p>“我非常佩服您一贯果断的工作作风，但是，咱们这款产品属于高档产品，而我们目前对周围的居民区的消费水平还不太了解，如果<br>不事先进行市场调查，就怕咱们费了功夫而成效不佳呀”</p>
<p>站在对方的立场看问题</p>
<p>一个下属能站在领导的立场上去说话，是理解领导的最好的方式</p>
<p>— 未完待续.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/11/17/job-ask/" data-id="ckc8hoiw70000paibh9hk0ylm" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%81%8C%E5%9C%BA/" rel="tag">职场</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-sun-talk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/06/sun-talk/" class="article-date">
  <time datetime="2019-10-06T03:02:40.000Z" itemprop="datePublished">2019-10-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/06/sun-talk/">儿子语录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="儿子语录"><a href="#儿子语录" class="headerlink" title="儿子语录"></a>儿子语录</h3><p>“儿子，画一条横线就是x轴，垂直线是y轴，相交的就是你们学的0，横着往右就是正无穷，儿子，你能说出一个最大的数字么”</p>
<p>“能，1兆”</p>
<p>“1兆是什么？？”…脑子已经不够教儿子了。…</p>
<hr>
<p>2019-10-07 晚10点</p>
<p>马上睡觉了。</p>
<p>儿子跟我说道“爸爸，妈妈今天一句也没夸我，都是说我的不好”</p>
<p>“哈哈，没事，我发现了很多优点，我来夸你吧”</p>
<p>“好哇”</p>
<p>“我看到很多优点，我随便说几条：”</p>
<p>晚饭吃了4个小煎包，符合我们定的减肥减餐，表扬<br>白天做了好几页语文试题，让我做都觉得辛苦，你完成了，表扬<br>上午出去遛狗，在小广场上，你帮助别人推婴儿车、看小孩，很棒，给你点赞<br>今天户外的运动量很大，差不多1-2小时，很棒<br>“优点挺多的，就不列举了，4条表扬可以好好睡觉了吧”</p>
<p>开心说道：“好的。爸爸，我要睡了“…</p>
<hr>
<p>2019-10-26</p>
<p>儿子：”妈妈我划着手了“</p>
<p>妈妈：“没破额”</p>
<p>儿子龇牙咧嘴地说：“疼重要还是破重要，你想想“</p>
<p>好像很有道理，哈哈哈哈</p>
<hr>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/10/06/sun-talk/" data-id="ckc8hqztf000020ib6n509jmv" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%84%BF%E5%AD%90/" rel="tag">儿子</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-jlxfd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/04/jlxfd/" class="article-date">
  <time datetime="2019-10-04T03:08:02.000Z" itemprop="datePublished">2019-10-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/04/jlxfd/">教练型辅导模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="教练型辅导模型"><a href="#教练型辅导模型" class="headerlink" title="教练型辅导模型"></a>教练型辅导模型</h3><p>助推型<br>对员工进行助推型辅导，当员工没有自信时：</p>
<p>开导辅导：明确说明目的，给予认可，提升信心。</p>
<p>澄清现状：通过倾听的方式来了解情况，采用引导式提问，如果对方答对，就给鼓励，如果没答对，分享自己，然后继续引导。</p>
<p>共创方案： 采用引导式提问，让对方自己思考出解决方案，必要的时候，给予一定的补充，最后形成解决方案。</p>
<p>共识行动：引导对方降方案完整复述一遍，定下进一步跟进的时间点</p>
<p>结束辅导：确认对方现在是否还有担忧，给对方打气、鼓励。</p>
<p>改善型<br>对员工进行改善型辅导，当员工清晰激动时：</p>
<p>开启辅导：应特别注意对方的情绪，用各种RULES平复对方的情绪</p>
<p>澄清现状：通过倾听方式来了解情况，同事注意对方的情绪，如果仍然比较激动时，可以用各种RULES来平复对方的情绪</p>
<p>共创方案： 如果对方说没办法，请先不要生气，说明愿意和对方一起想办法，先明确现状，然后通过倾听的方案，引导对方一步步思考方案，当方案形成时，不要急于安排，而是要确保能执行到位</p>
<p>共识行动： 可以通过让对方说出方案的方式来确认对方对于方案的接受程度，并定出跟进方案</p>
<p>结束辅导： 利用“认可”，“理解”给对方打气、鼓励</p>
<p>问题型<br>开启辅导：说明这次辅导的目的-解决工作中的问题,并给出事实</p>
<p>澄清现状：1)收集员工对于目前问题的想法，收集过程中，对方很有可能会有各种武杰或找各种科光理由，这是请使用事实进行引导，始终由事实出发，以解决工作问题出发，而不评价对方的人品；2）明确的给出对方可能的选择（a:限时改进，b:进行处罚）, 但表明希望能向好的方向发展</p>
<p>共创方案： 通过倾听对方，确认对方对于如何解决问题有很清晰的方法</p>
<p>共识行动： 1)请对方亲口说出自己的承诺，2）明确跟进方式，跟进时间等</p>
<p>结束辅导： 表明期待他的改变，会后与对方邮件确认辅导内容。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/10/04/jlxfd/" data-id="ckc8hxwsf00007fib3z2g9gph" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-trophy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/29/trophy/" class="article-date">
  <time datetime="2019-09-29T03:09:18.000Z" itemprop="datePublished">2019-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/29/trophy/">The HomeRun Trophy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="The-HomeRun-Trophy"><a href="#The-HomeRun-Trophy" class="headerlink" title="The HomeRun Trophy"></a>The HomeRun Trophy</h3><p>Maddy and her brother Alex are on the same baseball team. Maddy is good at baseball. She can catch and she can hit. It’s all easy for her. Alex doesn’t think it’s easy. He usually sits on the bench, and the coach never asks hime to play.</p>
<p>“I want to play, too,” Alex says after the game.</p>
<p>“Do you even know how to play?” Maddy says,laughing.</p>
<p>Alex’s face turns red.</p>
<p>“I have an announcement,” the coach says. “The player with the most home runs at the end of the season will win a trophy.”</p>
<p>Maddy looks at Alex and declares, “I’m going to win.”</p>
<p>I need a plan, Alex thinks. I want to win the trophy and show them that I can play well, too. He decides to practice every day.</p>
<p>Alex practices every day in the backyard, but Maddy doesn’t. I don’t need to practice, she thinks, because I’m very talented!</p>
<p>“Wait until the next game,” she tells Alex. “I’m going to hit a lot of home runs.” She sits and watches TV.</p>
<p>At th next game, a player is sick, so the coach asks Alex to play. Maddy plays, too. but she doesn’t hit any home runs.</p>
<p>The game is almost over. she thinks to herself. Are we going to lose?</p>
<p>When it’s Alex’s turn to bat, there are three players on base. To everyone’s surprise. Alex hits the ball hard. It flies high into the air and over the wall. It’s a home run!</p>
<p>The players run around the baces. and the team wins the game! The coach’s mouth is open wide. The other players are jumping up and down and cheering.</p>
<p>“Practicing works.” Alex syas quietly, and he smiles.</p>
<p>Alex keeps practicing. The coach lets him play more often. He hits a lot more home runs! Maddy hits home runs,too. but she doesn’t feel like she’s the star of the team anymore.</p>
<p>I’m going to try harder. she thinks at the end of a game.</p>
<p>But when she gets home, she doesn’t practice.</p>
<p>Maybe tomorrow, she thinks. Anyway, I’m very talented. I’m going to win that trophy.</p>
<p>After the last game of the season. the coach talks to the players.</p>
<p>“Great season, everyone.” he says. “Now, It’s time to award our home run trophy.” He smiles and hands it to Alex. “Congratulations, Alex, you had the most home runs this season!”</p>
<p>Everyone claps—except Maddy. She’s so disappointed. She’s quiet for a long time.</p>
<p>On the way home, she tells Alex. “I really wanted that trophy. But you worked very hard for it. I’m proud of you.”</p>
<p>Alex is very surprised. “Thnks.Maddy.” he says. “Maybe we can practice together next season.”</p>
<p>“That’s great idea!” Maddy says.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/09/29/trophy/" data-id="ckc8i3tb50004u9ib0s7ge7q0" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/English/" rel="tag">English</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-bigwin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/28/bigwin/" class="article-date">
  <time datetime="2019-09-28T03:10:07.000Z" itemprop="datePublished">2019-09-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/28/bigwin/">The Big Win 大赢家</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="The-Big-Win-大赢家"><a href="#The-Big-Win-大赢家" class="headerlink" title="The Big Win 大赢家"></a>The Big Win 大赢家</h3><p>It is a beautiful,sunny spring morning and the sky is bright blue with little white clouds. Runners from near and far are at the starting line. They’re preparing for the big race.</p>
<p>这是一个阳光明媚的春天的早晨，天空蓝蓝的，万里无云，来自真四面八方的运动员都在起跑线上，他们正在准备这次比赛。</p>
<p>A voice announces, “The race is starting sonn!”</p>
<p>广播传来 “比赛马上要开始啦”</p>
<p>The animals take their places. The alpaca, runner number five, is still stretching. The other animals wait for her.</p>
<p>“Hurry up, llama!” shouts the monkey. “We don’t have all day!”</p>
<p>“I’m not a llama,” replies runner number five. “I’m an alpaca.”</p>
<p>The announcer calls, “Get ready! Get set …”</p>
<p>“See you later!” says the monkey to the alpaca.</p>
<p>“Go!” shouts the announcer.</p>
<p>Right away, the monkey disappears over a hill. The rhino thinks the race is hard work! At the back, the Alpaca<br>is running very slowly.</p>
<p>Suddenly, the giraffe and the antelope crash into each other. They trip and fall. They cannot finish the race !<br>The monkey, the rhino and the alpaca continue.</p>
<p>The monkey is very far in front, so he stops to take a break.</p>
<p>“Why should I hurry?” he asks. “I can win very easily.”</p>
<p>He decides to play some games on his phone. After a few minutes, the rhino runs by. He lies down next<br>to the monkey. He is very tired and cannot finish the race.</p>
<p>The monkey doesn’t notice. He takes a picture of himself.</p>
<p>“Hello, beautiful!” he says, talking to himself.</p>
<p>The rhino thinks the monkey is talking to him! He is very embarrassed.</p>
<p>After a while, the alpaca passes them. The monkey is still looking at his phone.</p>
<p>The monkey thinks, I have a lot of time. The alpaca is very slow. Suddenly, he sees a message on his phone:”The alpaca wins the race!”</p>
<p>“Whaaaaaa-a-at?!” the monkey cries out.</p>
<p>At that same moment, he accidentally takes another picture of himeself.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/09/28/bigwin/" data-id="ckc8i3tah0000u9ibf53z97k3" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/English/" rel="tag">English</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-redisql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/19/redisql/" class="article-date">
  <time datetime="2019-09-19T03:11:07.000Z" itemprop="datePublished">2019-09-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/19/redisql/">rediSQL使用记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="rediSQL使用记录"><a href="#rediSQL使用记录" class="headerlink" title="rediSQL使用记录"></a>rediSQL使用记录</h3><p>背景<br>最近我们组在做自动化数据可视化产品，一次配置，可自动适配实时、离线数据, 实时数据存储在Redis,当前端图表配置项功能越来越复杂时，基于Key的查询接口实现上越来越臃肿，越来越难以跟上前端功能的多样性。</p>
<p>比如前端要自动生成表格，假设数据有俩个维度（platform端，city省份），2个指标（pv浏览量，click_pv点击)</p>
<p>KEY的格式分别为：</p>
<p>platform_city_pv value<br>platform_city_click_pv value<br>第一天，PM要求表格展示4列明细数据就OK</p>
<p>实时接口实现步骤：</p>
<p>需要知道每个维度都有哪些枚举值，比如端：app/m/pc/other，省市有32个，这些枚举值我可以从维表获取<br>拼key,大约需要拼 2 * 4 * 32 = 256<br>第二天，PM提出新要求，要求按照某列排序</p>
<p>内存排序<br>第三天，PM要求加一列，显示点击率 ( click_pv/pv)</p>
<p>衍生指标计算，支持公式定义的指标<br>第四天，点击率要求保留2位小数</p>
<p>格式化处理<br>第五天，点击率要百分制</p>
<p>第六天，按照点击率倒序显示表格</p>
<p>第七天，表格要做分页,一页10行</p>
<p>第八天，表格需要过滤掉点击率小于5%的行数据</p>
<p>第九天，。。。。</p>
<p>第十天，卒。</p>
<p>你会发现接口再屌，也难以应对丰富的前端功能</p>
<p>领导知道了我们接口的苦衷，马上喊过去开会，讨论半天确实没有太好的方案，不过嘴里一直叨叨 ”有可能在Redis直接执行SQL呢”..</p>
<p>说者无意，听者有心。</p>
<p>google起来。查到了我们今天的主角：RediSQL</p>
<p>git地址： <a href="https://github.com/RedBeardLab/rediSQL" target="_blank" rel="noopener">https://github.com/RedBeardLab/rediSQL</a></p>
<p>git真香.</p>
<p>介绍<br>rediSQL是Redis的SQLite数据库的嵌入模块，命令支持Redis几乎所有的类型和功能，支持SQL大部分语句, 使用也特别简单，下载，build后，启动redis时，加载编译后的so，就可以直接redis-cli命令行下执行SQL</p>
<p>安装<br>安装有两种方式</p>
<p>git clone &amp; build * release<br>docker方式<br>由于rediSQL需要rust环境，比较繁琐，我直接使用了docker hub的可用image.</p>
<p>dalongrong/redisql (可用）<br>rediSQL开放的镜像远程服务网络有问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker pull dalongrong/redisql <span class="comment"># ( 默认你有可用docker</span></span><br><span class="line">docker run -p  127.0.0.1:6379:6379 -it  dalongrong/redisql （ 暴露6379端口）</span><br><span class="line">redis-cli -p 6379 （ 连接的就是镜像中启动的redis)</span><br><span class="line">试用</span><br><span class="line">创建数据库：REDISQL.CREATE_DB helloworld</span><br><span class="line">创建表：REDISQL.EXEC helloworld <span class="string">"CREATE TABLE abc(A INT, B TEXT);"</span></span><br><span class="line">查询：REDISQL.EXEC helloworld <span class="string">"select * from abc"</span></span><br><span class="line">测试：SELECT position, dt, sum(req_pv) as req_pv FROM adm_rcmd_all_di GROUP BY dt,position having(sum(req_pv) &gt; 432683005803)  order by position,req_pv desc <span class="built_in">limit</span> 100</span><br></pre></td></tr></table></figure>
<p>SQL大部分功能都可以很好支持<br>SDK<br>想与我们的工程结合肯定需要有SDK的支持，不可能命令行操作。现在rediSQL支持三种语言</p>
<p>Python<br>Golang<br>Node.js<br>SDK实现方式都差不多，我们拿python来看一下使用方式。</p>
<p>获取连接（建议生产时使用连接池)</p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">conn</span><span class="params">()</span>:</span>
    <span class="keyword">return</span> redis.StrictRedis(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>)
执行操作命令
redis = conn() <span class="comment"># 获取连接</span>
redis.execute(<span class="string">"REDISQL.CREATE_DB"</span>, <span class="string">"db_1"</span>) <span class="comment"># 创建数据库</span>
query = <span class="string">"CREATE TABLE IF NOT EXISTS table_1(id integer primary key, age int, name text)"</span> 
redis.execute(<span class="string">"REDISQL.EXEC"</span>, <span class="string">"db_1"</span>, query) <span class="comment"># 创建表</span>
q = <span class="string">f"INSERT INTO table_1 VALUES(1,21, 'zhangsan');"</span>
self.redis.execute_command(<span class="string">"REDISQL.EXEC"</span>, <span class="string">'db_1'</span>, q)
性能测试
<span class="comment"># -*- coding: utf-8 -*-</span>
<span class="comment"># Author: kaizhang01</span>
<span class="keyword">import</span> asyncio
<span class="keyword">import</span> aioredis
<span class="keyword">import</span> random
<span class="keyword">import</span> redis
<span class="keyword">import</span> time


<span class="function"><span class="keyword">def</span> <span class="title">conn</span><span class="params">()</span>:</span>
    loop = asyncio.get_event_loop()
    conn_co = aioredis.create_pool(<span class="string">'redis://localhost'</span>, minsize=<span class="number">10</span>, maxsize=<span class="number">300</span>, loop=loop)
    redis_co = asyncio.gather(*[conn_co])
    redis = loop.run_until_complete(redis_co)
    redis = redis[<span class="number">0</span>]
    <span class="keyword">return</span> redis


<span class="function"><span class="keyword">def</span> <span class="title">new_conn</span><span class="params">()</span>:</span>
    <span class="comment"># return redis.Redis(host='localhost', port=6379, db=1)</span>
    <span class="comment"># return redis.StrictRedis(connection_pool =</span>
    <span class="comment">#         redis.BlockingConnectionPool(</span>
    <span class="comment">#             max_connections = 15,</span>
    <span class="comment">#             timeout = 10))</span>
    <span class="keyword">return</span> redis.StrictRedis(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>)


<span class="class"><span class="keyword">class</span> <span class="title">RedisSQL</span><span class="params">()</span>:</span>
    <span class="string">"""redis sql test"""</span>

    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span>
        self.table_name = <span class="string">'adm_rcmd_all_di'</span>
        self.redis = new_conn()
        self.dts = [
            <span class="string">"2019-09-10"</span>, <span class="string">"2019-09-11"</span>,
            <span class="string">"2019-09-12"</span>, <span class="string">"2019-09-13"</span>,
            <span class="string">"2019-09-14"</span>, <span class="string">"2019-09-15"</span>,
            <span class="string">"2019-09-16"</span>, <span class="string">"2019-09-17"</span>, <span class="string">"2019-09-18"</span>,
        ]
        self.authors = [
            <span class="string">"lisi"</span>,
            <span class="string">"zhangsan"</span>,
            <span class="string">"wangqiang"</span>
        ]
        self.position = [
            <span class="string">'0300'</span>, <span class="string">'0200'</span>
        ]

    <span class="function"><span class="keyword">def</span> <span class="title">db_init</span><span class="params">(self, run=False)</span>:</span>
        <span class="keyword">if</span> run:
            print(self.table_name)
            self.redis.execute(<span class="string">"REDISQL.CREATE_DB"</span>, self.table_name)  <span class="comment"># APP实时监测整体表</span>
            query = <span class="string">f"CREATE TABLE IF NOT EXISTS <span class="subst">{self.table_name}</span>(id integer primary key, position text, dt text, req_pv int, sign_show_pv int, click_pv int);"</span>
            print(query)
            self.redis.execute(<span class="string">"REDISQL.EXEC"</span>, self.table_name, query)
            <span class="comment"># statement = f"INSERT INTO {table_name} VALUES(1,'1111');"</span>
            <span class="comment"># print(statement)</span>
            <span class="comment"># self.redis.execute("REDISQL.EXEC", table_name, query)</span>
        <span class="keyword">return</span> self

    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self, run=False)</span>:</span>
        <span class="string">"""测试性能"""</span>
        <span class="comment"># 写入百万数据，测试查询</span>
        <span class="keyword">if</span> run:
            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">1200000</span>):
                _p = self.position[random.randint(<span class="number">0</span>, len(self.position) - <span class="number">1</span>)]
                _dt = self.dts[random.randint(<span class="number">0</span>, len(self.dts) - <span class="number">1</span>)]
                req_pv = random.randint(<span class="number">5000000</span>, <span class="number">8000000</span>)
                sign_show_pv = random.randint(<span class="number">3000000</span>, <span class="number">5000000</span>)
                click_pv = random.randint(<span class="number">1000000</span>, <span class="number">2000000</span>)
                row = <span class="string">f"<span class="subst">{i}</span>, '<span class="subst">{_p}</span>', '<span class="subst">{_dt}</span>', <span class="subst">{req_pv}</span>, <span class="subst">{sign_show_pv}</span>, <span class="subst">{click_pv}</span>"</span>
                <span class="comment"># print(row)</span>
                q = <span class="string">f"INSERT INTO <span class="subst">{self.table_name}</span> VALUES(<span class="subst">{row}</span>);"</span>
                self.redis.execute_command(<span class="string">"REDISQL.EXEC"</span>, self.table_name, q)
        <span class="keyword">return</span> self

    <span class="function"><span class="keyword">def</span> <span class="title">select</span><span class="params">(self)</span>:</span>
        <span class="comment"># q1 = f"SELECT dt, position,sum(req_pv) FROM {self.table_name} GROUP BY position,dt"</span>
        q1 = <span class="string">f"SELECT position, dt, sum(req_pv) as req_pv FROM <span class="subst">{self.table_name}</span> GROUP BY dt,position having(sum(req_pv) &gt; 432683005803)  order by position,req_pv desc limit 100"</span>
        print(q1, <span class="string">"\n"</span>, time.time())
        X = self.redis.execute_command(<span class="string">"REDISQL.EXEC"</span>, self.table_name, q1)
        <span class="keyword">for</span> x <span class="keyword">in</span> X:
            print(x)
        print(time.time())


<span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:
    RedisSQL().db_init(<span class="literal">True</span>).main(<span class="literal">True</span>).select()
Todo: 更新数据测试

结论
单线程导入百万数据应该在<span class="number">2</span>分钟左右
查询百万：<span class="number">1</span>s
复杂SQL: <span class="number">1</span>s
<span class="number">1</span>
SELECT position, dt, sum(req_pv) <span class="keyword">as</span> req_pv FROM adm_rcmd_all_di GROUP BY dt,position having(sum(req_pv) &gt; <span class="number">432683005803</span>)  order by position,req_pv desc limit <span class="number">100</span>
对于实时数据一般只展示当天最新数据，所以在数据量有限的情况下，比如百万级，可以一试
查询rediSQL网上资料很少，wiki给的命令很多也是不靠谱，这也是我要记录下来的原因
没有在生产环境得到验证，选择使用可以，但前期一定要有灾备方案.
命裏有時終須有，命裏無時莫強求

end.</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://wenhaozhang.com/2019/09/19/redisql/" data-id="ckc8i3tb10003u9ibhb3oeq2y" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/programmer/" rel="tag">programmer</a></li></ul>

    </footer>
  </div>
  
</article>
 


  

</section>
           
    <aside id="sidebar">
  
    
  <div class="widget-wrap">
     
        <h3 class="follow-title ">Follow me</h3>
     
    <div class="widget follow">
      
              <a class="github" aria-hidden="true" href="https://github.com/smallbaby" target="_blank" title="Github"></a>
      
      
            <a class="weibo" aria-hidden="true"  href="http://weibo.com/319869888" target="_blank" title="微博"></a>
      
      
      
            <a class="email" aria-hidden="true"  href="mailto:zhangkai081@gmail.com" target="_blank" title="邮箱"></a>
      
    </div>
  </div>


  
    
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title tagcloud">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/English/" style="font-size: 25px;">English</a> <a href="/tags/Java-SpringBoot/" style="font-size: 14px;">Java SpringBoot</a> <a href="/tags/english/" style="font-size: 14px;">english</a> <a href="/tags/programmer/" style="font-size: 14px;">programmer</a> <a href="/tags/%E5%84%BF%E5%AD%90/" style="font-size: 14px;">儿子</a> <a href="/tags/%E8%81%8C%E5%9C%BA/" style="font-size: 14px;">职场</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/26/springboot/">springboot</a>
          </li>
        
          <li>
            <a href="/2020/07/05/sang/">hexo文章增加图片</a>
          </li>
        
          <li>
            <a href="/2020/01/30/shark-lady/">shark_lady</a>
          </li>
        
          <li>
            <a href="/2019/11/17/job-ask/">职场汇报</a>
          </li>
        
          <li>
            <a href="/2019/10/06/sun-talk/">儿子语录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title archive">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
    
<div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
        <ul>
            
            <li>
                <a href="https://wwww.autohome.com.cn" target="_blank" rel="noopener">汽车之家</a>
            </li>
            
        </ul>
    </div>
</div>

  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2020 Jason zhang&nbsp;|&nbsp;
      Theme by <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      Contact&nbsp;|&nbsp;zhangkai081@gmail.com
    </div>
  </div>
</footer>
 
<script src="/jquery/jquery.min.js"></script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 
<script src="/js/is.js"></script>



  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/elevator.js"></script>

  </div>
</body>
</html>